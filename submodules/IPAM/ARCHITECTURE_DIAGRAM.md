# ğŸ—ï¸ IPAM Frontend Architecture Diagram

## System Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         IPAM Frontend System                         â”‚
â”‚                    (Next.js 14 + Bun + TypeScript)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                           â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  User Browser  â”‚         â”‚  Admin Browser â”‚
            â”‚  (Viewer Role) â”‚         â”‚  (Admin Role)  â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                           â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    Next.js App Router     â”‚
                    â”‚   (SSR + Client-Side)     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                         â”‚                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Auth Routes   â”‚    â”‚  Dashboard Routes   â”‚    â”‚   API Routes    â”‚
â”‚  /login        â”‚    â”‚  /dashboard/*       â”‚    â”‚  /api/*         â”‚
â”‚  /signup       â”‚    â”‚  (Protected)        â”‚    â”‚  (Optional)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                         â”‚                         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚      Providers Layer      â”‚
                    â”‚  - QueryClientProvider    â”‚
                    â”‚  - ThemeProvider          â”‚
                    â”‚  - Toaster                â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                         â”‚                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  State Layer   â”‚    â”‚   Data Layer        â”‚    â”‚   UI Layer      â”‚
â”‚  (Zustand)     â”‚    â”‚  (React Query)      â”‚    â”‚  (Components)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                         â”‚                         â”‚
        â”‚                         â”‚                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Auth Store    â”‚    â”‚   API Client        â”‚    â”‚  shadcn/ui      â”‚
â”‚  Theme Store   â”‚    â”‚   (Axios)           â”‚    â”‚  Custom IPAM    â”‚
â”‚  UI Store      â”‚    â”‚   + Interceptors    â”‚    â”‚  Components     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   FastAPI Backend         â”‚
                    â”‚   http://localhost:8000   â”‚
                    â”‚   /ipam/* endpoints       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Component Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Component Hierarchy                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

app/layout.tsx (Root)
â”‚
â”œâ”€â”€ Providers
â”‚   â”œâ”€â”€ QueryClientProvider
â”‚   â”œâ”€â”€ ThemeProvider
â”‚   â””â”€â”€ Toaster
â”‚
â”œâ”€â”€ app/(auth)/layout.tsx
â”‚   â”œâ”€â”€ LoginPage
â”‚   â”‚   â””â”€â”€ LoginForm
â”‚   â””â”€â”€ SignupPage
â”‚       â””â”€â”€ SignupForm
â”‚
â””â”€â”€ app/(dashboard)/layout.tsx
    â”œâ”€â”€ Navbar
    â”‚   â”œâ”€â”€ Logo
    â”‚   â”œâ”€â”€ ThemeToggle
    â”‚   â””â”€â”€ UserMenu
    â”‚
    â”œâ”€â”€ Sidebar
    â”‚   â”œâ”€â”€ NavLinks
    â”‚   â””â”€â”€ QuotaDisplay
    â”‚
    â””â”€â”€ Main Content
        â”œâ”€â”€ Breadcrumbs
        â”‚
        â”œâ”€â”€ Countries Page
        â”‚   â”œâ”€â”€ CountryCard[]
        â”‚   â””â”€â”€ UtilizationChart
        â”‚
        â”œâ”€â”€ Regions Page
        â”‚   â”œâ”€â”€ RegionCard[]
        â”‚   â”œâ”€â”€ RegionCreateForm
        â”‚   â””â”€â”€ CapacityGauge
        â”‚
        â”œâ”€â”€ Hosts Page
        â”‚   â”œâ”€â”€ HostCard[]
        â”‚   â”œâ”€â”€ HostCreateForm
        â”‚   â”œâ”€â”€ BatchHostForm
        â”‚   â””â”€â”€ DataTable
        â”‚
        â”œâ”€â”€ Search Page
        â”‚   â”œâ”€â”€ SearchForm
        â”‚   â””â”€â”€ SearchResults
        â”‚
        â”œâ”€â”€ Analytics Page
        â”‚   â”œâ”€â”€ IPHierarchyTree
        â”‚   â”œâ”€â”€ UtilizationChart
        â”‚   â”œâ”€â”€ AllocationTimeline
        â”‚   â””â”€â”€ TopUtilizedResources
        â”‚
        â””â”€â”€ Audit Page
            â””â”€â”€ AuditLogViewer
```

---

## Data Flow Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Data Flow Diagram                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User Action
    â”‚
    â–¼
Component Event Handler
    â”‚
    â–¼
React Query Hook (useMutation/useQuery)
    â”‚
    â–¼
API Service Function (regionsApi.create)
    â”‚
    â–¼
Axios Client
    â”‚
    â”œâ”€â–º Request Interceptor
    â”‚   â””â”€â–º Add JWT Token
    â”‚
    â–¼
HTTP Request to Backend
    â”‚
    â–¼
FastAPI Backend (/ipam/regions)
    â”‚
    â–¼
HTTP Response
    â”‚
    â”œâ”€â–º Response Interceptor
    â”‚   â”œâ”€â–º Handle 401 (Refresh Token)
    â”‚   â””â”€â–º Handle Errors
    â”‚
    â–¼
React Query Cache Update
    â”‚
    â”œâ”€â–º Invalidate Related Queries
    â”œâ”€â–º Optimistic Update
    â””â”€â–º Trigger Refetch
    â”‚
    â–¼
Component Re-render
    â”‚
    â–¼
UI Update + Toast Notification
```

---

## Authentication Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Authentication Flow                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User enters credentials
    â”‚
    â–¼
LoginForm validation (Zod)
    â”‚
    â–¼
POST /auth/login
    â”‚
    â–¼
Backend validates credentials
    â”‚
    â–¼
Response: { access_token, refresh_token, user }
    â”‚
    â–¼
Store in Zustand Auth Store
    â”‚
    â”œâ”€â–º accessToken (memory)
    â”œâ”€â–º refreshToken (httpOnly cookie)
    â””â”€â–º user (memory)
    â”‚
    â–¼
Redirect to /dashboard
    â”‚
    â–¼
Middleware checks authentication
    â”‚
    â”œâ”€â–º âœ… Authenticated â†’ Allow
    â””â”€â–º âŒ Not authenticated â†’ Redirect to /login
    â”‚
    â–¼
Protected Route Rendered
    â”‚
    â–¼
API Request with Bearer Token
    â”‚
    â”œâ”€â–º 200 OK â†’ Success
    â”œâ”€â–º 401 Unauthorized â†’ Refresh Token Flow
    â”‚   â”‚
    â”‚   â–¼
    â”‚   POST /auth/refresh
    â”‚   â”‚
    â”‚   â”œâ”€â–º Success â†’ Update accessToken â†’ Retry Request
    â”‚   â””â”€â–º Fail â†’ Logout â†’ Redirect to /login
    â”‚
    â””â”€â–º 403 Forbidden â†’ Show Permission Error
```

---

## Theme System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       Theme System Flow                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User selects theme (Violet)
    â”‚
    â–¼
ThemePalettePicker component
    â”‚
    â–¼
Update Theme Store (Zustand)
    â”‚
    â–¼
ThemeProvider applies theme
    â”‚
    â”œâ”€â–º Load theme tokens (lib/themes/violet.ts)
    â”‚   â”‚
    â”‚   â”œâ”€â–º colors: { primary, secondary, ... }
    â”‚   â”œâ”€â–º shadows: { sm, md, lg }
    â”‚   â””â”€â–º radius: { sm, md, lg }
    â”‚
    â”œâ”€â–º Generate CSS variables
    â”‚   â”‚
    â”‚   â””â”€â–º :root {
    â”‚         --primary: 262 83% 58%;
    â”‚         --region-active: 142 76% 36%;
    â”‚         ...
    â”‚       }
    â”‚
    â”œâ”€â–º Inject into <html> element
    â”‚   â”‚
    â”‚   â””â”€â–º <html class="violet light">
    â”‚
    â””â”€â–º Components use CSS variables
        â”‚
        â””â”€â–º className="bg-primary text-primary-foreground"
            â”‚
            â–¼
        Rendered with theme colors
```

---

## State Management Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    State Management Layers                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Client State (Zustand)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Auth Store                                                          â”‚
â”‚  - user, accessToken, refreshToken                                   â”‚
â”‚  - login(), logout(), refreshAccessToken()                           â”‚
â”‚                                                                       â”‚
â”‚  Theme Store                                                         â”‚
â”‚  - currentTheme, mode (light/dark)                                   â”‚
â”‚  - setTheme(), toggleMode()                                          â”‚
â”‚                                                                       â”‚
â”‚  UI Store                                                            â”‚
â”‚  - sidebarOpen, modalOpen                                            â”‚
â”‚  - toggleSidebar(), openModal()                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Server State (React Query)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Countries                                                           â”‚
â”‚  - useCountries(), useCountry(id), useCountryUtilization(id)        â”‚
â”‚                                                                       â”‚
â”‚  Regions                                                             â”‚
â”‚  - useRegions(), useRegion(id), useCreateRegion()                   â”‚
â”‚  - useUpdateRegion(), useRetireRegion()                             â”‚
â”‚                                                                       â”‚
â”‚  Hosts                                                               â”‚
â”‚  - useHosts(), useHost(id), useCreateHost()                         â”‚
â”‚  - useBatchCreateHosts(), useReleaseHost()                          â”‚
â”‚                                                                       â”‚
â”‚  Search                                                              â”‚
â”‚  - useSearch(filters)                                                â”‚
â”‚                                                                       â”‚
â”‚  Audit                                                               â”‚
â”‚  - useAuditHistory(resourceId)                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       Form State (React Hook Form)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  - RegionCreateForm                                                  â”‚
â”‚  - HostCreateForm                                                    â”‚
â”‚  - BatchHostForm                                                     â”‚
â”‚  - SearchForm                                                        â”‚
â”‚  - LoginForm                                                         â”‚
â”‚                                                                       â”‚
â”‚  Validation: Zod schemas                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## File System Architecture

```
submodules/IPAM/
â”‚
â”œâ”€â”€ app/                          # Next.js App Router
â”‚   â”œâ”€â”€ layout.tsx                # Root layout
â”‚   â”œâ”€â”€ page.tsx                  # Home page
â”‚   â”‚
â”‚   â”œâ”€â”€ (auth)/                   # Auth group
â”‚   â”‚   â”œâ”€â”€ layout.tsx
â”‚   â”‚   â”œâ”€â”€ login/page.tsx
â”‚   â”‚   â””â”€â”€ signup/page.tsx
â”‚   â”‚
â”‚   â””â”€â”€ (dashboard)/              # Dashboard group
â”‚       â”œâ”€â”€ layout.tsx            # Dashboard layout
â”‚       â”œâ”€â”€ countries/
â”‚       â”‚   â”œâ”€â”€ page.tsx
â”‚       â”‚   â””â”€â”€ [country]/page.tsx
â”‚       â”œâ”€â”€ regions/
â”‚       â”‚   â”œâ”€â”€ page.tsx
â”‚       â”‚   â”œâ”€â”€ create/page.tsx
â”‚       â”‚   â””â”€â”€ [regionId]/page.tsx
â”‚       â”œâ”€â”€ hosts/
â”‚       â”‚   â”œâ”€â”€ page.tsx
â”‚       â”‚   â”œâ”€â”€ create/page.tsx
â”‚       â”‚   â”œâ”€â”€ batch/page.tsx
â”‚       â”‚   â””â”€â”€ [hostId]/page.tsx
â”‚       â”œâ”€â”€ search/page.tsx
â”‚       â”œâ”€â”€ analytics/page.tsx
â”‚       â”œâ”€â”€ audit/page.tsx
â”‚       â””â”€â”€ settings/page.tsx
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/                       # shadcn/ui components
â”‚   â”‚   â”œâ”€â”€ button.tsx
â”‚   â”‚   â”œâ”€â”€ card.tsx
â”‚   â”‚   â”œâ”€â”€ dialog.tsx
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ core/                     # Layout components
â”‚   â”‚   â”œâ”€â”€ navbar.tsx
â”‚   â”‚   â”œâ”€â”€ sidebar.tsx
â”‚   â”‚   â”œâ”€â”€ breadcrumbs.tsx
â”‚   â”‚   â””â”€â”€ footer.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ ipam/                     # IPAM components
â”‚   â”‚   â”œâ”€â”€ country-card.tsx
â”‚   â”‚   â”œâ”€â”€ region-card.tsx
â”‚   â”‚   â”œâ”€â”€ host-card.tsx
â”‚   â”‚   â”œâ”€â”€ ip-hierarchy-tree.tsx
â”‚   â”‚   â”œâ”€â”€ utilization-chart.tsx
â”‚   â”‚   â”œâ”€â”€ capacity-gauge.tsx
â”‚   â”‚   â””â”€â”€ audit-log-viewer.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ forms/                    # Form components
â”‚   â”‚   â”œâ”€â”€ region-create-form.tsx
â”‚   â”‚   â”œâ”€â”€ host-create-form.tsx
â”‚   â”‚   â”œâ”€â”€ batch-host-form.tsx
â”‚   â”‚   â””â”€â”€ search-form.tsx
â”‚   â”‚
â”‚   â””â”€â”€ theme/                    # Theme components
â”‚       â”œâ”€â”€ theme-provider.tsx
â”‚       â”œâ”€â”€ theme-toggle.tsx
â”‚       â””â”€â”€ theme-palette-picker.tsx
â”‚
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ api/                      # API services
â”‚   â”‚   â”œâ”€â”€ client.ts             # Axios instance
â”‚   â”‚   â”œâ”€â”€ countries.ts
â”‚   â”‚   â”œâ”€â”€ regions.ts
â”‚   â”‚   â”œâ”€â”€ hosts.ts
â”‚   â”‚   â”œâ”€â”€ search.ts
â”‚   â”‚   â”œâ”€â”€ audit.ts
â”‚   â”‚   â””â”€â”€ auth.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ hooks/                    # Custom hooks
â”‚   â”‚   â”œâ”€â”€ use-auth.ts
â”‚   â”‚   â”œâ”€â”€ use-theme.ts
â”‚   â”‚   â”œâ”€â”€ use-countries.ts
â”‚   â”‚   â”œâ”€â”€ use-regions.ts
â”‚   â”‚   â”œâ”€â”€ use-hosts.ts
â”‚   â”‚   â””â”€â”€ use-search.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ store/                    # Zustand stores
â”‚   â”‚   â”œâ”€â”€ auth-store.ts
â”‚   â”‚   â”œâ”€â”€ ui-store.ts
â”‚   â”‚   â””â”€â”€ theme-store.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ themes/                   # Theme definitions
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ violet.ts
â”‚   â”‚   â”œâ”€â”€ emerald.ts
â”‚   â”‚   â”œâ”€â”€ sunset.ts
â”‚   â”‚   â”œâ”€â”€ amber.ts
â”‚   â”‚   â””â”€â”€ dusk.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                    # Utilities
â”‚   â”‚   â”œâ”€â”€ cn.ts
â”‚   â”‚   â”œâ”€â”€ format.ts
â”‚   â”‚   â”œâ”€â”€ validation.ts
â”‚   â”‚   â””â”€â”€ constants.ts
â”‚   â”‚
â”‚   â””â”€â”€ types/                    # TypeScript types
â”‚       â”œâ”€â”€ ipam.ts
â”‚       â”œâ”€â”€ api.ts
â”‚       â””â”€â”€ theme.ts
â”‚
â”œâ”€â”€ styles/
â”‚   â”œâ”€â”€ globals.css               # Global styles
â”‚   â””â”€â”€ themes.css                # Theme styles
â”‚
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ icons/
â”‚   â””â”€â”€ images/
â”‚
â”œâ”€â”€ providers.tsx                 # App providers
â”œâ”€â”€ middleware.ts                 # Auth middleware
â”œâ”€â”€ next.config.js
â”œâ”€â”€ tailwind.config.ts
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ package.json
â””â”€â”€ bun.lockb
```

---

## Deployment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Production Deployment                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Developer Machine
    â”‚
    â”œâ”€â–º git push origin main
    â”‚
    â–¼
GitHub Repository
    â”‚
    â”œâ”€â–º Webhook trigger
    â”‚
    â–¼
CI/CD Pipeline (GitHub Actions)
    â”‚
    â”œâ”€â–º Install dependencies (bun install)
    â”œâ”€â–º Run tests (bun test)
    â”œâ”€â–º Run linter (bun run lint)
    â”œâ”€â–º Type check (bun run type-check)
    â”œâ”€â–º Build (bun run build)
    â”‚
    â–¼
Build Artifacts
    â”‚
    â”œâ”€â–º .next/ folder
    â”œâ”€â–º public/ folder
    â””â”€â–º package.json
    â”‚
    â–¼
Deployment Platform
    â”‚
    â”œâ”€â–º Vercel
    â”‚   â”œâ”€â–º Edge Network
    â”‚   â”œâ”€â–º Serverless Functions
    â”‚   â””â”€â–º Automatic HTTPS
    â”‚
    â”œâ”€â–º Docker
    â”‚   â”œâ”€â–º Container Registry
    â”‚   â”œâ”€â–º Kubernetes Cluster
    â”‚   â””â”€â–º Load Balancer
    â”‚
    â””â”€â–º Static Export
        â”œâ”€â–º S3 Bucket
        â”œâ”€â–º CloudFront CDN
        â””â”€â–º Route 53 DNS
    â”‚
    â–¼
Production Environment
    â”‚
    â”œâ”€â–º https://ipam.yourdomain.com
    â”‚
    â–¼
End Users
```

---

## Security Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       Security Layers                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 1: Network Security                                           â”‚
â”‚  - HTTPS/TLS encryption                                              â”‚
â”‚  - CORS configuration                                                â”‚
â”‚  - Rate limiting                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 2: Authentication                                             â”‚
â”‚  - JWT tokens (access + refresh)                                    â”‚
â”‚  - Secure token storage                                              â”‚
â”‚  - Auto token refresh                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 3: Authorization                                              â”‚
â”‚  - Permission checks                                                 â”‚
â”‚  - Role-based access control                                         â”‚
â”‚  - Resource ownership validation                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 4: Input Validation                                           â”‚
â”‚  - Zod schema validation                                             â”‚
â”‚  - XSS prevention                                                    â”‚
â”‚  - SQL injection prevention                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 5: Output Sanitization                                        â”‚
â”‚  - HTML escaping                                                     â”‚
â”‚  - Safe rendering                                                    â”‚
â”‚  - Content Security Policy                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**This architecture provides a complete visual reference for the IPAM frontend system!** ğŸ¨
