# ============================================================================
# SECOND BRAIN DATABASE - ENVIRONMENT CONFIGURATION
# ============================================================================
# Copy this file to .env and configure with your actual values
# DO NOT commit .env to version control!

# ============================================================================
# APPLICATION SETTINGS
# ============================================================================
APP_NAME=Second Brain Database
ENVIRONMENT=development
DEBUG=True
LOG_LEVEL=INFO
HOST=0.0.0.0
PORT=8000

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
MONGODB_URL=mongodb://127.0.0.1:27017/second_brain_db
MONGODB_MAX_POOL_SIZE=100
MONGODB_MIN_POOL_SIZE=10
MONGODB_MAX_IDLE_TIME_MS=45000

REDIS_URL=redis://127.0.0.1:6379/0
REDIS_MAX_CONNECTIONS=50
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5

# ============================================================================
# SECURITY & AUTHENTICATION
# ============================================================================
# IMPORTANT: Change these in production!
JWT_SECRET_KEY=your-secret-key-here-change-in-production-use-openssl-rand-hex-32
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# Generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
ENCRYPTION_KEY=your-fernet-key-here

# Password Policy
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=True
PASSWORD_REQUIRE_LOWERCASE=True
PASSWORD_REQUIRE_DIGIT=True
PASSWORD_REQUIRE_SPECIAL=True

# Rate Limiting
RATE_LIMIT_ENABLED=True
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_PERIOD=60

# ============================================================================
# AI & LLM CONFIGURATION
# ============================================================================
# LangChain
LANGCHAIN_ENABLED=True
LANGCHAIN_MODEL_PROVIDER=ollama
LANGCHAIN_DEFAULT_MODEL=gemma3:1b
LANGCHAIN_TEMPERATURE=0.7
LANGCHAIN_MAX_TOKENS=2048
LANGCHAIN_MEMORY_TTL=3600
LANGCHAIN_CONVERSATION_HISTORY_LIMIT=50

# Ollama Configuration
OLLAMA_HOST=http://127.0.0.1:11434
OLLAMA_MODEL=gemma3:1b
OLLAMA_AVAILABLE_MODELS=gemma3:1b,deepseek-r1:1.5b
OLLAMA_REASONING_MODEL=deepseek-r1:1.5b
OLLAMA_FAST_MODEL=gemma3:1b
OLLAMA_AUTO_MODEL_SELECTION=True

# AI Agent Configuration
AI_MODEL_POOL_SIZE=5
AI_MAX_CONCURRENT_SESSIONS=100
AI_SESSION_TIMEOUT=3600
AI_MODEL_RESPONSE_TIMEOUT=120
AI_WORKFLOW_TIMEOUT=600
AI_MODEL_TEMPERATURE=0.7
AI_DEFAULT_AGENT=personal

# LangSmith Observability (Optional)
LANGSMITH_API_KEY=
LANGSMITH_PROJECT=SecondBrainDatabase
LANGSMITH_ENDPOINT=https://api.smith.langchain.com
LANGSMITH_TRACING=False

# ============================================================================
# VOICE & REAL-TIME COMMUNICATION
# ============================================================================
# LiveKit Configuration
LIVEKIT_ENABLED=True
LIVEKIT_API_KEY=
LIVEKIT_API_SECRET=
LIVEKIT_URL=ws://localhost:7880
LIVEKIT_ROOM_TIMEOUT=600

# Deepgram STT/TTS (Optional - for production voice)
DEEPGRAM_API_KEY=

# Voice Processing Settings
VOICE_SAMPLE_RATE=16000
VOICE_CHUNK_SIZE=1024
VOICE_MAX_AUDIO_LENGTH=30
VOICE_TTS_VOICE=en

# ============================================================================
# CELERY CONFIGURATION
# ============================================================================
CELERY_BROKER_URL=redis://127.0.0.1:6379/0
CELERY_RESULT_BACKEND=redis://127.0.0.1:6379/0
CELERY_TASK_SERIALIZER=json
CELERY_ACCEPT_CONTENT=json
CELERY_TIMEZONE=UTC
CELERY_ENABLE_UTC=True

# ============================================================================
# MCP SERVER CONFIGURATION
# ============================================================================
MCP_ENABLED=True
MCP_SERVER_NAME=SecondBrainMCP
MCP_SERVER_VERSION=1.0.0
MCP_DEBUG_MODE=False

# Transport Configuration
MCP_TRANSPORT=stdio
MCP_HTTP_HOST=127.0.0.1
MCP_HTTP_PORT=8001
MCP_HTTP_CORS_ENABLED=False
MCP_HTTP_CORS_ORIGINS=*

# Security Configuration
MCP_SECURITY_ENABLED=True
MCP_REQUIRE_AUTH=True
MCP_AUTH_TOKEN=
MCP_AUDIT_ENABLED=True

# Rate Limiting
MCP_RATE_LIMIT_ENABLED=True
MCP_RATE_LIMIT_REQUESTS=100
MCP_RATE_LIMIT_PERIOD=60
MCP_RATE_LIMIT_BURST=10

# Performance
MCP_MAX_CONCURRENT_TOOLS=50
MCP_REQUEST_TIMEOUT=30
MCP_TOOL_EXECUTION_TIMEOUT=60

# Tool Categories
MCP_TOOLS_ENABLED=True
MCP_RESOURCES_ENABLED=True
MCP_PROMPTS_ENABLED=True

# Tool Access Control
MCP_FAMILY_TOOLS_ENABLED=True
MCP_AUTH_TOOLS_ENABLED=True
MCP_PROFILE_TOOLS_ENABLED=True
MCP_SHOP_TOOLS_ENABLED=True
MCP_WORKSPACE_TOOLS_ENABLED=True
MCP_ADMIN_TOOLS_ENABLED=False
MCP_SYSTEM_TOOLS_ENABLED=False

# ============================================================================
# DOCUMENT PROCESSING
# ============================================================================
DOCLING_ENABLED=True
DOCLING_MAX_FILE_SIZE=52428800
DOCLING_SUPPORTED_FORMATS=pdf,docx,pptx
DOCLING_OCR_ENABLED=True

# ============================================================================
# API DOCUMENTATION
# ============================================================================
DOCS_ENABLED=True
DOCS_URL=/docs
DOCS_REDOC_URL=/redoc
DOCS_CACHE_TTL=3600
DOCS_REQUIRE_AUTH=False

# Production Documentation Security
DOCS_ALLOWED_IPS=
DOCS_RATE_LIMIT_REQUESTS=10
DOCS_RATE_LIMIT_PERIOD=60

# ============================================================================
# CORS CONFIGURATION
# ============================================================================
CORS_ENABLED=True
CORS_ORIGINS=http://localhost:3000,http://localhost:8000
CORS_ALLOW_CREDENTIALS=True
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE,PATCH
CORS_ALLOW_HEADERS=*
CORS_MAX_AGE=3600

# ============================================================================
# LOGGING & MONITORING
# ============================================================================
# Loki Integration (Optional)
LOKI_ENABLED=False
LOKI_URL=http://localhost:3100/loki/api/v1/push

# Performance Monitoring
PERFORMANCE_MONITORING_ENABLED=True
METRICS_COLLECTION_INTERVAL=60

# ============================================================================
# FEATURE FLAGS
# ============================================================================
FEATURE_AI_AGENTS=True
FEATURE_VOICE_PROCESSING=True
FEATURE_DOCUMENT_PROCESSING=True
FEATURE_MCP_SERVER=True
FEATURE_FAMILY_MANAGEMENT=True
FEATURE_WORKSPACE_MANAGEMENT=True
FEATURE_SHOP=True

# ============================================================================
# ADVANCED CONFIGURATION
# ============================================================================
# Request/Response Limits
MAX_REQUEST_SIZE=52428800
MAX_UPLOAD_SIZE=52428800
REQUEST_TIMEOUT=300

# Connection Pooling
DB_CONNECTION_POOL_SIZE=100
REDIS_CONNECTION_POOL_SIZE=50

# Retry Configuration
MCP_RETRY_ENABLED=True
MCP_RETRY_MAX_ATTEMPTS=3
MCP_RETRY_INITIAL_DELAY=1.0
MCP_RETRY_BACKOFF_FACTOR=2.0
MCP_RETRY_MAX_DELAY=30.0

# Circuit Breaker
MCP_CIRCUIT_BREAKER_ENABLED=True
MCP_CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
MCP_CIRCUIT_BREAKER_RECOVERY_TIMEOUT=60

# ============================================================================
# PRODUCTION OVERRIDES
# ============================================================================
# Uncomment and configure for production deployment:

# DEBUG=False
# ENVIRONMENT=production
# LOG_LEVEL=WARNING

# Use strong secrets:
# JWT_SECRET_KEY=<generate-with-openssl-rand-hex-32>
# ENCRYPTION_KEY=<generate-with-fernet>

# Production databases:
# MONGODB_URL=mongodb://prod-host:27017/second_brain_db
# REDIS_URL=redis://prod-host:6379/0

# Restrict CORS:
# CORS_ORIGINS=https://yourdomain.com

# Tighter rate limits:
# RATE_LIMIT_REQUESTS=50
# RATE_LIMIT_PERIOD=60

# Disable dangerous features:
# MCP_ADMIN_TOOLS_ENABLED=False
# MCP_SYSTEM_TOOLS_ENABLED=False
# MCP_DEBUG_MODE=False
